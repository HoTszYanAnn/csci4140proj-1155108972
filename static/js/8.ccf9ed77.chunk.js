(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[8,2],{113:function(e,a,t){},145:function(e,a){},206:function(e,a,t){e.exports=t.p+"static/media/waitingOpponent.d29765f0.svg"},208:function(e,a,t){},244:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(88),i=t(94),s=t(10),o=t(82),c=t(83),m=t(90),p=t(89),u=t(235),h=(t(21),t(80)),d=t(18),g=t(239),v=t(150),f=t(205),G=t.n(f),y=t(241),b=Object(h.a)({root:{"& .MuiInputLabel-outlined":{transform:"translate(20px, 12px) scale(3)",color:"#adadad","&.Mui-error ":{color:"red"}},"& .MuiInputLabel-shrink":{transform:"translate(14px, -12px) scale(1.5)","&.Mui-focused ":{color:"#34ffff"},"&.Mui-error ":{color:"red"}},"&:hover .MuiInputLabel-outlined":{color:"#34ffff","&.Mui-error ":{color:"red"}},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#adadad","& span":{"& legend":{color:"white"}}},"&:hover fieldset":{borderColor:"#34ffff"},"&.Mui-focused fieldset":{borderColor:"#34ffff"},"&.Mui-error fieldset":{borderColor:"red"},color:"white",fontSize:"2rem"}}})(y.a),x=Object(h.a)({root:{"& svg":{fontSize:75,color:"#adadad"},"&:hover svg":{fontSize:75,color:"#34ffff"}}})(g.a),M=Object(h.a)({root:{"& svg":{fontSize:75,color:"#adadad"},"&:hover svg":{fontSize:75,color:"#ff3434"}}})(g.a),E=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handlePlayerNameChange=function(e){var a=e.target.value;n.setState({changingPlayerName:a})},n.handleLogin=function(){n.props.onLogin(n.state.changingPlayerName)},n.getErrorMessage=function(e,a){return e?/^\w+$/.test(e)?e.length>15?"Too Long! Max length is 15":a.includes(e)?"Player name is existed":" ":"Invalid characters exist":"Player name cannot be empty"},n.getError=function(e){return" "!==e},n.state={changingPlayerName:e.playerName},n}return Object(c.a)(t,[{key:"render",value:function(){var e=this,a=this.state.changingPlayerName,t=this.props.playersNames,n=this.getErrorMessage(a,t),l=this.getError(n);return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"title"},"Minesweeper Battle"),r.a.createElement("div",{className:"subtitle"},"Online Battle"),r.a.createElement("div",{className:"loginGroup"},r.a.createElement("div",null,r.a.createElement(b,{label:"Enter Your Name",error:l,helperText:n,margin:"normal",value:a,variant:"outlined",inputProps:{min:0,style:{textAlign:"center"}},onKeyPress:function(a){var t=a.key;return!l&&"Enter"===t&&e.handleLogin()},onChange:this.handlePlayerNameChange})),r.a.createElement("div",null,r.a.createElement(x,{disabled:l,onClick:this.handleLogin}," ",r.a.createElement(G.a,null))),r.a.createElement("div",null,r.a.createElement(M,{disabled:l,component:d.b,to:"/"}," ",r.a.createElement(v.a,null)))))}}]),t}(n.Component),C=t(206),k=t.n(C),N=t(119),V=t.n(N),I=t(207),w=Object(h.a)({root:{"& svg":{fontSize:50,color:"#adadad"},"&:hover svg":{fontSize:50,color:"#34ffff"}}})(g.a),P=Object(h.a)({root:{"& svg":{fontSize:50,color:"#adadad"},"&:hover svg":{fontSize:50,color:"#ff3434"}}})(g.a),S=function(e,a){return e.find((function(e){return e.name===a}))},A=function(e){return e.find((function(e){return!e.name}))},j=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).handleJoinClick=function(){var a=e.props,t=a.roomId,n=a.players;e.props.onJoin(t,A(n).id)},e.handleLeaveClick=function(){e.props.onLeave(e.props.roomId)},e.handlePlayClick=function(){var a=e.props,t=a.roomId,n=a.players,r=a.playerName;e.props.onPlay(t,"".concat(S(n,r).id),n.length)},e.handleSpectateClick=function(){var a=e.props,t=a.roomId,n=a.players;e.props.onSpectate(t,n.length)},e}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props,a=(e.name,e.playerName),t=e.players;S(t,a);return A(t)?r.a.createElement("div",{className:"center flexGroup"},r.a.createElement("object",{type:"image/svg+xml",data:k.a}),r.a.createElement(w,{onClick:this.handleLeaveClick},r.a.createElement(V.a,null))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"title"},"Minesweeper Battle"),r.a.createElement("div",{className:"loginGroup"},r.a.createElement("div",{className:"subtitle"},t[0].name," ",r.a.createElement("span",{style:{color:"#ff3434"}},"VS")," ",t[1].name),r.a.createElement("div",{style:{marginLeft:"1rem"}},r.a.createElement(w,{variant:"outlined",onClick:this.handlePlayClick},r.a.createElement(I.a,null))),r.a.createElement("div",null,r.a.createElement(P,{variant:"outlined",onClick:this.handleLeaveClick},r.a.createElement(V.a,null)))))}}]),t}(n.Component),B=Object(h.a)({root:{"& svg":{fontSize:50,color:"#adadad"},"&:hover svg":{fontSize:50,color:"#ff3434"}}})(g.a),O=function(e){e.exitButtonLabel;var a=e.playerName,t=e.onExit;return r.a.createElement("div",null,r.a.createElement("div",{className:"title"},"Minesweeper Battle"),r.a.createElement("div",{className:"flexGroup"},r.a.createElement("div",{className:"subtitle"},"Welcome, ",a),r.a.createElement("div",null,r.a.createElement(B,{onClick:t},r.a.createElement(V.a,null)))))},D=t(209),R=t.n(D),L=(t(208),function(e){return e.gameComponents[0].game.name}),T=Object(h.a)({root:{"& svg":{fontSize:50,color:"#adadad"},"&:hover svg":{fontSize:50,color:"#ff3434"}}})(g.a),z=T,J=function(e){var a=[];return Array.isArray(e.gameInstances)?(e.gameInstances.forEach((function(e){e.players.forEach((function(e){e.name&&a.push(e.name)}))})),a):a},F=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handleLoginClick=function(e){n.props.onEnterLobby(e)},n.findCurrentPlayerGame=function(){var e=n.props,a=e.gameInstances,t=e.playerName;return a.filter((function(e){return e.players.some((function(e){return e.name===t}))}))},n.handleLogoutClick=function(){n.findCurrentPlayerGame().forEach((function(e){return n.handleLeaveRoomClick(e.gameID)})),n.props.onExitLobby()},n.handleCreateRoomClick=function(){n.props.onCreateRoom(L(n.props),2)},n.handleRefreshRoomsClick=function(){n.props.onRefreshRooms()},n.handleJoinRoomClick=function(e,a){n.props.onJoinRoom(L(n.props),e,a)},n.handleLeaveRoomClick=function(e){n.props.onLeaveRoom(L(n.props),e)},n.handlePlayClick=function(e,a,t){n.props.onStartGame(L(n.props),{gameID:e,playerID:a,numPlayers:t})},n.handleSpectateClick=function(e,a){n.props.onStartGame(L(n.props),{gameID:e,numPlayers:a})},n.handleExitRoomClick=function(){n.props.onExitRoom()},n.componentDidUpdate=function(e){e.gameInstances!==n.props.gameInstances&&n.state.join&&(n.autoJoin(),n.state.join=0)},n.findFreeSeat=function(e){return e.find((function(e){return!e.name}))},n.autoJoin=function(){for(var e=0,a=1;n.props.gameInstances[e];){if(console.log(n.props.gameInstances[e].players),n.findFreeSeat(n.props.gameInstances[e].players))return a=0,console.log(n.findFreeSeat(n.props.gameInstances[e].players).id),console.log(n.props.gameInstances[e].gameID),void n.handleJoinRoomClick(n.props.gameInstances[e].gameID,n.findFreeSeat(n.props.gameInstances[e].players).id);e++}a&&(n.handleCreateRoomClick(),n.state.join=1)},n.exitAndLeaveRoom=function(){n.state.justleave=1,n.handleExitRoomClick(),n.handleLeaveRoomClick(n.props.runningGame.gameID)},n.state={join:0,justleave:0},n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){setInterval(this.handleRefreshRoomsClick,15e3),this.props.gameInstances[0]||this.handleCreateRoomClick()}},{key:"reload",value:function(){window.location.reload()}},{key:"render",value:function(){var e=this.props,a=e.errorMsg,t=e.phase,n=e.playerName,l=e.gameInstances,i=e.runningGame;return a?r.a.createElement("div",null,"error: ",a,r.a.createElement(T,{onClick:this.reload}," ",r.a.createElement(R.a,null))):(console.log(this.props),console.log(t),"enter"===t?r.a.createElement(E,{playerName:n,playersNames:J(this.props),onLogin:this.handleLoginClick}):(console.log(l),console.log(this.findCurrentPlayerGame()[0]),"list"===t&&l[0]?this.findCurrentPlayerGame()[0]&&!this.state.justleave?r.a.createElement(j,{key:this.findCurrentPlayerGame()[0].gameID,name:"Territories ".concat(this.findCurrentPlayerGame()[0].gameID.substring(0,3)),roomId:this.findCurrentPlayerGame()[0].gameID,players:this.findCurrentPlayerGame()[0].players,playerName:n,alreadyJoined:J(this.props).includes(n),onJoin:this.handleJoinRoomClick,onLeave:this.handleLeaveRoomClick,onPlay:this.handlePlayClick,onSpectate:this.handleSpectateClick}):(this.state.justleave=0,r.a.createElement("div",{className:"center"},r.a.createElement(O,{exitButtonLabel:"logout",playerName:n,onExit:this.handleLogoutClick}),r.a.createElement("div",{className:"margin"},r.a.createElement(u.a,{className:"button",onClick:this.autoJoin},"START Pairing")))):"play"===t?r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"flexGroup"},r.a.createElement("div",{className:"titleSmaller"},"MineSweeper Battle"),r.a.createElement(z,{onClick:this.exitAndLeaveRoom},r.a.createElement(V.a,null))),i&&r.a.createElement(i.app,{gameID:i.gameID,playerID:i.playerID,credentials:i.credentials})):r.a.createElement("div",null,r.a.createElement(s.a,null))))}}]),t}(n.Component),W=t(91),U="https://csci4140proj-1155108972-server.herokuapp.com";a.default=function(){return r.a.createElement(i.b,{gameServer:U,lobbyServer:U,gameComponents:[{game:l.a,board:W.a}],renderer:function(e){var a=e.errorMsg,t=e.lobbyServer,n=e.gameComponents,l=e.rooms,i=e.phase,s=e.playerName,o=e.runningGame,c=e.handleEnterLobby,m=e.handleExitLobby,p=e.handleCreateRoom,u=e.handleJoinRoom,h=e.handleLeaveRoom,d=e.handleExitRoom,g=e.handleRefreshRooms,v=e.handleStartGame;return r.a.createElement(F,{server:t,errorMsg:a,gameComponents:n,gameInstances:l,phase:i,playerName:s,runningGame:o,onEnterLobby:c,onExitLobby:m,onCreateRoom:p,onJoinRoom:u,onLeaveRoom:h,onExitRoom:d,onRefreshRooms:g,onStartGame:v})}})}},88:function(e,a,t){"use strict";var n=t(97),r=t(106),l=16,i=function(e){for(var a=Array(144).fill(null),t=0;t<e.length;t++)for(var n=0;n<e[t];n++){var r=0;do{r=Math.floor(Math.random()*l*9)}while(null!=a[r]);a[r]=t+1}return a},s=function(e,a,t){var n=0;return a[t-1]&&a[t-1]>0&&t%l!=0&&(n+=a[t-1]),a[t+1]&&a[t+1]>0&&t%l!=15&&(n+=a[t+1]),a[t+l-1]&&a[t+l-1]>0&&t%l!=0&&(n+=a[t+l-1]),a[t+l]&&a[t+l]>0&&(n+=a[t+l]),a[t+l+1]&&a[t+l+1]>0&&t%l!=15&&(n+=a[t+l+1]),a[t-l-1]&&a[t-l-1]>0&&t%l!=0&&(n+=a[t-l-1]),a[t-l]&&a[t-l]>0&&(n+=a[t-l]),a[t-l+1]&&a[t-l+1]>0&&t%l!=15&&(n+=a[t-l+1]),n},o=function(e,a,t,n,r,l){t[a]||0==t[a]||(e[a]>0?(t[a]=s(0,e,a),console.log("mine+"+t[a]+"+"+e[a]),n[r]=n[r]-e[a],n[r]<0&&(n[r]=0),l[a]=1):t[a]=s(0,e,a))},c={name:"minesweeper",setup:function(){return{cells:Array(144).fill(null),mineValue:i([6,4,2]),randomMine:[6,4,2],presetPlayersMine:[1,1,1,1,1],playersMine:[1,1,1,1,1,1,1,1,1,1],currentValue:Array(144).fill(null),currentMine:null,numPlayers:2,hp:Array(2).fill(10),boardx:l,boardy:9,gameover:null}},moves:{sweep:function(e,a,t){var i=Object(r.a)(e.cells),s=Object(r.a)(e.mineValue),c=Object(r.a)(e.currentValue),m=a.currentPlayer,p=Object(r.a)(e.hp);return c[t]=0,o(s,t,i,p,m,c),t%l!=15&&o(s,t+1,i,p,m,c),t%l!=0&&o(s,t-1,i,p,m,c),o(s,t+l,i,p,m,c),o(s,t-l,i,p,m,c),Object(n.a)({},e,{cells:i,mineValue:s,hp:p,currentValue:c})},selectMine:function(e,a,t){var r=e.currentMine;return console.log("select"),r=r==t?null:t,Object(n.a)({},e,{currentMine:r})},placeMine:function(e,a,t,l){var i=Object(r.a)(e.mineValue),s=a.currentPlayer,o=Object(r.a)(e.playersMine),c=l||e.currentMine;return i[t]=i[t]+c,o[5*s+c-1]--,c=null,Object(n.a)({},e,{mineValue:i,currentMine:c,playersMine:o})},changeBoardShowing:function(e,a,t){var l=Object(r.a)(e.currentValue),i=l[t];return i^=1,l[t]=i,Object(n.a)({},e,{currentValue:l})}},turn:{onEnd:function(e,a){if(e.gameover=function(e,a){for(var t=!0,n=0;n<144;n++)if(null==a[n]){t=!1;break}return e[0]<=0?{winner:1}:e[1]<=0?{winner:0}:!!t&&(e[0]<e[1]?{winner:1}:e[1]<e[0]?{winner:0}:{winner:1})}(e.hp,e.cells),e.gameover)for(var t=0;t<144;t++)e.cells[t]=s(e.cells,e.mineValue,t),e.currentValue[t]=0,e.mineValue[t]&&(e.currentValue[t]=1)}},endIf:function(e,a){}};a.a=c},91:function(e,a,t){"use strict";var n=t(82),r=t(83),l=t(90),i=t(89),s=t(0),o=t.n(s),c=(t(113),t(20)),m=t(130),p=function(){function e(a,t,r,l,i){var s=this;Object(n.a)(this,e),this.placeActive=function(e){return!s.game.G.cells[e]&&0!=s.game.G.cells[e]&&((!s.game.G.cells[e-1]&&0!=s.game.G.cells[e-1]||e%s.game.G.boardx==0)&&((!s.game.G.cells[e+1]&&0!=s.game.G.cells[e+1]||e%s.game.G.boardx==s.game.G.boardx-1)&&((!s.game.G.cells[e+s.game.G.boardx-1]&&0!=s.game.G.cells[e+s.game.G.boardx-1]||e%s.game.G.boardx==0)&&(!s.game.G.cells[e+s.game.G.boardx]&&0!=s.game.G.cells[e+s.game.G.boardx]&&((!s.game.G.cells[e+s.game.G.boardx+1]&&0!=s.game.G.cells[e+s.game.G.boardx+1]||e%s.game.G.boardx==s.game.G.boardx-1)&&((!s.game.G.cells[e-s.game.G.boardx-1]&&0!=s.game.G.cells[e-s.game.G.boardx-1]||e%s.game.G.boardx==0)&&(!s.game.G.cells[e-s.game.G.boardx]&&0!=s.game.G.cells[e-s.game.G.boardx]&&(!s.game.G.cells[e-s.game.G.boardx+1]&&0!=s.game.G.cells[e-s.game.G.boardx+1]||e%s.game.G.boardx==s.game.G.boardx-1))))))))},this.game=a,this.mcts=i,this.parent=t,this.move=r,this.wins=[],this.visits=0,this.children=null,this.depth=l||0}return Object(r.a)(e,[{key:"getUCB1",value:function(e){return 0==this.visits?1/0:this.parent?(this.wins[e]||0)/this.visits+Math.sqrt(2*Math.log(this.parent.visits)/this.visits):0}},{key:"getChildren",value:function(){if(null===this.children){null!==this.move&&this.performMove(this.move);var a=this.getPossibleMoves();this.children=[];for(var t=0;t<a.length;t++){var n=new e(m.cloneDeep(this.game),this,a[t],this.depth+1,this.mcts);this.children.push(n)}}return this.children}},{key:"getWinner",value:function(){this.getChildren();for(var e=this.game.G.boardx,a=this.game.G.boardy,t=!0,n=0;n<e*a;n++)if(null==this.game.G.cells[n]){t=!1;break}return this.game.G.hp[0]<=this.mcts.orginalhp[0]-2||this.game.G.hp[0]<=0?1:this.game.G.hp[1]<=this.mcts.orginalhp[1]-2||this.game.G.hp[1]<=0?0:!!t&&(this.game.G.hp[0]<this.game.G.hp[1]?{winner:1}:this.game.G.hp[1]<this.game.G.hp[0]?{winner:0}:{winner:1})}},{key:"nextMove",value:function(){return m(this.getChildren()).shuffle().sortBy(this.mcts.nodeSort).last()}},{key:"getPossibleMoves",value:function(){var e=[];if(this.haveMine())for(var a=0;a<2*this.game.G.mineValue.length;a++)a<this.game.G.mineValue.length?null==this.game.G.cells[a]&&e.push(a):this.placeActive(a-this.game.G.mineValue.length)&&e.push(a);else for(var t=0;t<this.game.G.mineValue.length;t++)t<this.game.G.mineValue.length&&null==this.game.G.cells[t]&&e.push(t);return e=m.shuffle(e)}},{key:"haveMine",value:function(){for(var e=Math.abs(this.mcts.player-this.depth%2),a=0,t=5*e;t<5*e+5;t++)a+=this.game.G.playersMine[t];return a>0}},{key:"performMove",value:function(e){var a=1-Math.abs(this.mcts.player-this.depth%2);if(e<this.game.G.mineValue.length){var t=this.game.G.boardx;this.game.G.cells[e]=this.calculateMinesAround(e),this.mcts.inBoard(e+1)&&e%t!=t-1&&null==this.game.G.cells[e+1]&&(this.game.G.cells[e+1]=this.calculateMinesAround(e+1)),this.mcts.inBoard(e-1)&&e%t!=0&&null==this.game.G.cells[e-1]&&(this.game.G.cells[e-1]=this.calculateMinesAround(e-1)),this.mcts.inBoard(e+t)&&null==this.game.G.cells[e+t]&&(this.game.G.cells[e+t]=this.calculateMinesAround(e+t)),this.mcts.inBoard(e-t)&&null==this.game.G.cells[e-t]&&(this.game.G.cells[e-t]=this.calculateMinesAround(e-t))}else{e-=this.game.G.mineValue.length;var n=0;do{n=Math.floor(5*Math.random())}while(this.game.G.playersMine[5*a+n]<=0);this.game.G.mineValue[e]+=n+1,this.game.G.playersMine[5*a+n]-=1}}},{key:"calculateMinesAround",value:function(e){var a=0,t=this.game.G.boardx;return this.game.G.mineValue[e-1]&&this.game.G.mineValue[e-1]>0&&e%t!=0&&(a+=this.game.G.mineValue[e-1]),this.game.G.mineValue[e+1]&&this.game.G.mineValue[e+1]>0&&e%t!=t-1&&(a+=this.game.G.mineValue[e+1]),this.game.G.mineValue[e+t-1]&&this.game.G.mineValue[e+t-1]>0&&e%t!=0&&(a+=this.game.G.mineValue[e+t-1]),this.game.G.mineValue[e+t]&&this.game.G.mineValue[e+t]>0&&(a+=this.game.G.mineValue[e+t]),this.game.G.mineValue[e+t+1]&&this.game.G.mineValue[e+t+1]>0&&e%t!=t-1&&(a+=this.game.G.mineValue[e+t+1]),this.game.G.mineValue[e-t-1]&&this.game.G.mineValue[e-t-1]>0&&e%t!=0&&(a+=this.game.G.mineValue[e-t-1]),this.game.G.mineValue[e-t]&&this.game.G.mineValue[e-t]>0&&(a+=this.game.G.mineValue[e-t]),this.game.G.mineValue[e-t+1]&&this.game.G.mineValue[e-t+1]>0&&e%t!=t-1&&(a+=this.game.G.mineValue[e-t+1]),null!==this.game.G.mineValue[e]&&(this.game.G.hp[Math.abs(this.mcts.player-this.depth%2)]-=this.game.G.mineValue[e]),a}}]),e}(),u=function(){function e(a,t){Object(n.a)(this,e),this.aiMine=t,this.game=m.cloneDeep(a),this.orginalMineArray=m.cloneDeep(this.game.G.mineValue),this.orginalCells=m.cloneDeep(this.game.G.cells),this.nodeSort=function(e){return e.parent?e.getUCB1(1-Math.abs(e.mcts.player-e.parent.depth%2)):0},this.winnerarr=[],this.orginalhp=m.cloneDeep(this.game.G.hp),this.rounds=this.game.ai.time||15,console.log(this.rounds),this.player=this.game.ctx.currentPlayer||0,this.rootNode=new p(this.game,null,null,0,this)}return Object(r.a)(e,[{key:"inBoard",value:function(e){var a=this.game.G.boardx,t=this.game.G.boardy;return e>=0&&e<a*t}},{key:"fillMinable",value:function(e,a,t){var n=this.game.G.boardx;return e%n!=0&&this.inBoard(e-1-n)&&(null===t[e-1-n]||t[e-1-n]>a)&&(t[e-1-n]=a),this.inBoard(e-n)&&(null===t[e-n]||t[e-n]>a)&&(t[e-n]=a),e%n!=n-1&&this.inBoard(e+1-n)&&(null===t[e+1-n]||t[e+1-n]>a)&&(t[e+1-n]=a),e%n!=0&&this.inBoard(e-1)&&(null===t[e-1]||t[e-1]>a)&&(t[e-1]=a),e%n!=n-1&&this.inBoard(e+1)&&(null===t[e+1]||t[e+1]>a)&&(t[e+1]=a),e%n!=0&&this.inBoard(e-1+n)&&(null===t[e-1+n]||t[e-1+n]>a)&&(t[e-1+n]=a),this.inBoard(e+n)&&(null===t[e+n]||t[e+n]>a)&&(t[e+n]=a),e%n!=n-1&&this.inBoard(e+1+n)&&(null===t[e+1+n]||t[e+1+n]>a)&&(t[e+1+n]=a),t}},{key:"minusCellValue",value:function(e,a,t){var n=this.game.G.boardx;return e%n!=0&&this.inBoard(e-1-n)&&null!=t[e-1-n]&&(t[e-1-n]-=a),this.inBoard(e-n)&&null!=t[e-n]&&(t[e-n]-=a),e%n!=n-1&&this.inBoard(e+1-n)&&null!=t[e+1-n]&&(t[e+1-n]-=a),e%n!=0&&this.inBoard(e-1)&&null!=t[e-1]&&(t[e-1]-=a),e%n!=n-1&&this.inBoard(e+1)&&null!=t[e+1]&&(t[e+1]-=a),e%n!=0&&this.inBoard(e-1+n)&&null!=t[e-1+n]&&(t[e-1+n]-=a),this.inBoard(e+n)&&null!=t[e+n]&&(t[e+n]-=a),e%n!=n-1&&this.inBoard(e+1+n)&&null!=t[e+1+n]&&(t[e+1+n]-=a),t}},{key:"randomizeMine",value:function(){for(var e=[0,0,0,0,0],a=this.game.G.boardx,t=this.game.G.boardy,n=0;n<5;n++)void 0!=this.game.G.randomMine[n]&&(e[n]=this.game.G.randomMine[n]);for(var r=0;r<10;r++)r<5?e[r]+=this.game.G.presetPlayersMine[r]-this.game.G.playersMine[r]:e[r-5]+=this.game.G.presetPlayersMine[r-5]-this.game.G.playersMine[r];for(var l=!1,i=Array(a*t).fill(null),s=0;s<this.aiMine.length;s++)i[this.aiMine[s][0]]+=this.aiMine[s][1],e[this.aiMine[s][1]-1]-=1;var o=i,c=Array(a*t).fill(null);do{l=!1;var p=m.cloneDeep(this.orginalCells);o=i;for(var u=e.length-1;u>=0;u--){for(var h=0;h<e[u];h++){c=Array(a*t).fill(null);for(var d=0;d<c.length;d++)p[d]>=0&&null!=p[d]&&(c=this.fillMinable(d,p[d],c));for(var g=[],v=[],f=0;f<c.length;f++)if(c[f]>=u+1)for(var G=0;G<c[f];G++)for(var y=0;y<10;y++)g.push(f);else null==c[f]&&v.push(f);if(0!=v.length)for(var b=0;b<2;b++)g.push(-1);if(0==g.length){l=!0;break}var x=g[Math.floor(Math.random()*g.length)];-1==x?o[v[Math.floor(Math.random()*v.length)]]+=2:o[x]+=u+1,p=this.minusCellValue(x,u+1,p)}if(l)break}}while(l);for(var M=0;M<a*t;M++)null==c[M]&&null==o[M]&&Math.floor(3*Math.random())&&(o[M]=1);this.game.G.mineValue=m.cloneDeep(o)}},{key:"selectMove",value:function(){var e,a=new Date,t=a.getTime(),n=0;do{n+=1;var r=(a=new Date).getTime();for(e=this.rootNode,this.rootNode.visits+=1,this.randomizeMine();!m.isEmpty(e.getChildren())&&((e=e.nextMove()).visits+=1,0!==e.getWinner()&&1!==e.getWinner()););var l=e.getWinner();for(this.winnerarr.push(l);e;)e.wins[l]=(e.wins[l]||0)+1,e=e.parent}while(r-t<1e3*this.rounds);for(n=0;n<this.winnerarr.length;++n)0==this.winnerarr[n]?0:0;return console.log(m(this.rootNode.getChildren()).sortBy("visits").last().wins),console.log("loop "+n),console.log(this.rootNode.children.length),console.log(m(this.rootNode.getChildren()).sortBy("visits").last().visits),m(this.rootNode.getChildren()).sortBy("visits").last().move}}]),e}(),h=function(e){Object(l.a)(t,e);var a=Object(i.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).AImove=function(){console.log("AITURN");var e=new u(r.props,r.state.aiMine[r.props.ctx.currentPlayer]).selectMove();if(e<r.props.G.mineValue.length)console.log("sweep "+e),r.props.moves.sweep(e);else{var a=0;do{a=Math.floor(5*Math.random())}while(0==r.props.G.playersMine[5*r.props.ctx.currentPlayer+a]);r.state.aiMine[r.props.ctx.currentPlayer].push([e-r.props.G.boardx*r.props.G.boardy,a+1]),console.log(r.state.aiMine),r.props.moves.placeMine(e-r.props.G.boardx*r.props.G.boardy,a+1)}r.props.events.endTurn()},r.onClick=function(e,a){r.isActive()&&r.isMyTurn()?r.props.G.currentMine?r.placeActive(e)&&(r.props.moves.placeMine(e),r.props.events.endTurn()):r.sweepActive(e)?(r.props.moves.sweep(e),r.props.events.endTurn()):r.props.G.mineValue[e]&&0!=r.props.G.cells[e]&&r.props.moves.changeBoardShowing(e):r.props.G.mineValue[e]&&0!=r.props.G.cells[e]&&r.props.moves.changeBoardShowing(e)},r.selectMine=function(e){r.isActive()&&r.selectActive(e)&&r.props.moves.selectMine(e)},r.isAITurn=function(){return!!r.props.bothai||void 0!==r.props.ai&&r.props.ai.id==r.props.ctx.currentPlayer},r.isMyTurn=function(){return r.props.playerID==r.props.ctx.currentPlayer},r.isActive=function(){return!r.props.G.gameover},r.sweepActive=function(e){return!r.props.G.cells[e]&&0!=r.props.G.cells[e]},r.placeActive=function(e){return!r.props.G.cells[e]&&0!=r.props.G.cells[e]&&((!r.props.G.cells[e-1]&&0!=r.props.G.cells[e-1]||e%r.props.G.boardx==0)&&((!r.props.G.cells[e+1]&&0!=r.props.G.cells[e+1]||e%r.props.G.boardx==r.props.G.boardx-1)&&((!r.props.G.cells[e+r.props.G.boardx-1]&&0!=r.props.G.cells[e+r.props.G.boardx-1]||e%r.props.G.boardx==0)&&(!r.props.G.cells[e+r.props.G.boardx]&&0!=r.props.G.cells[e+r.props.G.boardx]&&((!r.props.G.cells[e+r.props.G.boardx+1]&&0!=r.props.G.cells[e+r.props.G.boardx+1]||e%r.props.G.boardx==r.props.G.boardx-1)&&((!r.props.G.cells[e-r.props.G.boardx-1]&&0!=r.props.G.cells[e-r.props.G.boardx-1]||e%r.props.G.boardx==0)&&(!r.props.G.cells[e-r.props.G.boardx]&&0!=r.props.G.cells[e-r.props.G.boardx]&&(!r.props.G.cells[e-r.props.G.boardx+1]&&0!=r.props.G.cells[e-r.props.G.boardx+1]||e%r.props.G.boardx==r.props.G.boardx-1))))))))},r.selectActive=function(e){return 0!=r.props.G.playersMine[e+5*r.props.ctx.currentPlayer-1]},r.isSelected=function(e){return r.props.G.currentMine==e},r.isCurrentValue=function(e){return!!r.props.G.currentValue[e]},r.changeable=function(e){return!(!r.props.G.mineValue[e]||!r.props.G.cells[e]||0==r.props.G.cells[e])},r.state={aiMine:[[],[]],aiFirstMove:!1},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(e){var a=this;void 0===this.props.ai&&!this.props.bothai||1!=this.props.ctx.turn||this.props.aiFirstMove||this.isAITurn()&&(this.setState({aiFirstMove:!0}),console.log(this.props.ctx.currentPlayer),setTimeout((function(){a.AImove()}),1e3))}},{key:"componentDidUpdate",value:function(e){var a=this;void 0===this.props.ai&&!this.props.bothai||e.ctx.currentPlayer==this.props.ctx.currentPlayer||this.props.G.gameover||this.isAITurn()&&(console.log(this.props.ctx.currentPlayer),setTimeout((function(){a.AImove()}),1e3))}},{key:"render",value:function(){var e=this,a="",t="selectDisable gameBoardTable gameBoardCell";this.props.G.currentMine&&this.props.ctx.currentPlayer==this.props.playerID&&(t+=" gameBoardSelectedMine"),this.props.G.gameover&&(a=this.props.G.gameover.winner);var n=[],r=[];this.props.bothai?n.push(o.a.createElement("div",{key:"textbtn",style:{display:"flex",flexDirection:"column",paddingRight:"1rem"}},o.a.createElement("div",{style:{alignSelf:"flex-end"}},"Mine:"),o.a.createElement("div",{style:{alignSelf:"flex-end"}},"AI 1:"),o.a.createElement("div",{style:{alignSelf:"flex-end"}},"AI 2:"))):n.push(o.a.createElement("div",{key:"textbtn",style:{display:"flex",flexDirection:"column",paddingRight:"1rem"}},o.a.createElement("div",{style:{alignSelf:"flex-end"}},"Mine:"),o.a.createElement("div",{style:{alignSelf:"flex-end"}},"Remains:"),o.a.createElement("div",{style:{alignSelf:"flex-end"}},"Opponents:")));for(var l=function(a){var t=null;t=e.isSelected(a)&&e.props.ctx.currentPlayer==e.props.playerID?"minebtnStyle selectPressed mineBtnActive":e.selectActive(a)&&e.isActive(a)&&!e.isAITurn()&&e.props.ctx.currentPlayer==e.props.playerID?"minebtnStyle mineBtnActive":"minebtnStyle",e.props.bothai?n.push(o.a.createElement("div",{key:a,className:"temp"},o.a.createElement("div",{className:t,key:a,onClick:function(){return e.selectMine(a)}},a),o.a.createElement("div",{className:"remainMineValue"},e.props.G.playersMine[a+0-1]),o.a.createElement("div",{className:"remainMineValue"},e.props.G.playersMine[a+5-1]))):n.push(o.a.createElement("div",{key:a,className:"temp"},o.a.createElement("div",{className:t,key:a,onClick:function(){return e.selectMine(a)}},a),o.a.createElement("div",{className:"remainMineValue"},e.props.G.playersMine[a+5*e.props.playerID-1]),o.a.createElement("div",{className:"remainMineValue"},e.props.G.playersMine[a+5*(1-e.props.playerID)-1])))},i=1;i<6;i++)l(i);for(var s=0;s<this.props.G.boardy;s++){for(var m=[],p=function(a){var t=s*e.props.G.boardx+a,n=null,r=null;n=e.sweepActive(t)&&e.isActive(t)?"cell cellActive":"cell",e.changeable(t)&&(n+=" cellChangeable"),e.isCurrentValue(t)?(r=e.props.G.mineValue[t],n+=" showingMineValue"):r=0==e.props.G.cells[t]?"":e.props.G.cells[t],m.push(o.a.createElement("td",{className:"gameBoardCell",key:t,onClick:function(){return e.onClick(t)}},o.a.createElement("div",{className:n},r)))},u=0;u<this.props.G.boardx;u++)p(u);r.push(o.a.createElement("tr",{key:s,className:"gameBoardCell"},m))}return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("div",{style:{marginBottom:"1rem"}},!a&&0!==a&&o.a.createElement("div",null,o.a.createElement("div",{className:"flexGroup"},o.a.createElement("div",{className:"game-detailgp"},o.a.createElement("div",{className:"game-text"},this.props.gameMetadata[0].name),o.a.createElement("div",{className:"game-text"},"HP: ",this.props.G.hp[0])),o.a.createElement("div",{className:"game-vs"},"VS"),o.a.createElement("div",{className:"game-detailgp"},o.a.createElement("div",{className:"game-text"},this.props.gameMetadata[1].name),o.a.createElement("div",{className:"game-text"},"HP: ",this.props.G.hp[1]))),!this.props.bothai&&o.a.createElement("div",{className:"game-text"},this.props.playerID==this.props.ctx.currentPlayer&&"Your Turn",this.props.playerID!=this.props.ctx.currentPlayer&&"Opponent Turn"),this.props.bothai&&o.a.createElement("div",{className:"game-text"},this.props.gameMetadata[this.props.ctx.currentPlayer].name," turn ")),!this.props.bothai&&(0===a||a)&&o.a.createElement("div",{className:"subtitle"},a==this.props.playerID&&"Congratulations, You Win",a!=this.props.playerID&&a>=0&&"Oops, You Lose"),this.props.bothai&&(0===a||a)&&o.a.createElement("div",{className:"subtitle"},this.props.gameMetadata[a].name,"win")),this.isAITurn()&&!this.props.G.gameover&&o.a.createElement(c.LoopCircleLoading,{color:"#34ffff"}),o.a.createElement("table",{id:"board",className:t,style:{margin:"0 auto"}},o.a.createElement("tbody",null,r))),o.a.createElement("br",null),o.a.createElement("div",{className:"minebtnGroups selectDisable game-text","text-align":"center",style:{display:"flex",justifyContent:"center"}},n))}}]),t}(s.Component);a.a=h}}]);
//# sourceMappingURL=8.ccf9ed77.chunk.js.map